# XSS (Cross Site Scripting) 跨站脚本
- 目标站点被用户访问时 攻击者在网页渲染时插入脚本指令并执行
- 危害：挂马 盗取用户 cookie DDOS攻击(拒绝服务) 钓鱼攻击 篡改 劫持用户web行为 渗透内网 爆发蠕虫 刷广告刷流量
- 被动型 需要受害者主动触发

1. 反射型：服务端返回脚本 客户端执行
- URL注入非法脚本 发送给受害用户 (一般浏览器都有基本防御措施 自带拦截过滤) 
- 服务端返回的富文本中包含非法脚本 被直接展示
  
2. 存储型：后台存储了非法脚本 并且前端直接展示
- 发帖中发出包含恶意代码的内容 其他用户访问到该内容后 满足特定条件即触发
- 需要后台不过滤信息 而且前端展示时也不过滤信息

3. DOM-Based 型：基于 DOM 或本地的 XSS 攻击
- wifi 流量劫持 DNS 劫持 并且直接返回钓鱼页面
- 本质是需要更改DOM 再排除自己攻击自己 严格来说某些反射型攻击也能造成这个成果-通过 URL 控制 DOM

- 防范：对输入(和 URL 参数)进行过滤 对输出进行编码 cookie 设置 http-only
- 输入处理：包含用户输入 URL参数 POST请求参数 ajax
- 输出处理：脚本转义 实体编码
- cookie：设置为 http-only